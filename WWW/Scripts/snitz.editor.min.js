$(window).on("load",function(){$("#editorDiv").on("click",".emote",function(n){var t=$(n.target).attr("rel"),i=$(this).closest("[id^=editorDiv]"),r=i.find(".bbc-code-editor")[0].id;$("#"+r).insertAtCaret(t)});$("body").off("click").on("click",".btn-postform",function(n){var r=$(this).attr("data-first"),u=$(this).attr("data-last"),t=$(this).attr("data-label"),a=$(this).closest("[id^=editorDiv]"),i=a.find(".bbc-code-editor")[0].id,o,y,c,l;if($("#FormatMode").length===0){if(t==="listitem"||t==="numbered"||t==="alpha"||t==="unordered"){var v=$("#"+i).getSelection(),f=v.split(/\n/),e="";for(o in f)e+="[*]"+f[o]+"[/*]";$("#"+i).replaceSelection(r.replace("[*]","")+e+u.replace("[/*]",""))}else $("#"+i).surroundSelection(r,u);$("#"+i).focus()}else if($("#FormatMode").val()==="Help")y=$(this).html(),BootstrapDialog.show({title:window.Snitzres.helpEditor,message:$(this).next().next(".btn-help").html(),size:BootstrapDialog.SIZE_NORMAL});else if($("#FormatMode").val()==="Basic"||t.length<1){if(t==="listitem"||t==="numbered"||t==="alpha"||t==="unordered"){var p=$("#"+i).getSelection(),s=p.split(/\n/),h="";for(c in s)h+="[*]"+s[c]+"[/*]";$("#"+i).replaceSelection(r.replace("[*]","")+h+u.replace("[/*]",""))}else $("#"+i).surroundSelection(r,u);$("#"+i).focus()}else n.preventDefault(),l=SnitzVars.baseUrl+"Topic/PromptDialog",t!==""&&$.get(l+"?data="+t,function(n){$("#prompt-container").html(n);$("#prompt-input").val($("#"+i).getSelection());$("#val1").val(r);$("#val2").val(u);$("#promptModal").modal().show()});return!1});$(".sel-postform").on("click",function(n){var r=$(this).attr("data-first"),u=$(this).attr("data-last"),f=$(this).attr("data-label"),o=$(this).closest("[id^=editorDiv]"),t=o.find(".bbc-code-editor")[0].id,i,e;n.preventDefault();$("#FormatMode").length===0?($("#"+t).surroundSelection(r.replace("XXX",this.title),u.replace("XXX",this.title)),$("#"+t).focus()):$("#FormatMode").val()==="Basic"||f.length<1?($("#"+t).surroundSelection(r.replace("XXX",this.title),u.replace("XXX",this.title)),$("#"+t).focus()):$("#FormatMode").val()==="Help"?(BootstrapDialog.show({title:window.Snitzres.helpEditor,message:$(this).parent().parent().next().html().replace(/XXX/g,this.title).replace(/inherit/g,this.title),size:BootstrapDialog.SIZE_NORMAL}),$(this)[0].selectedIndex=0):(i=this.title,e=SnitzVars.baseUrl+"Topic/PromptDialog",$.get(e+"?data="+f+"&selected="+i,function(n){$("#prompt-container").html(n);$("#prompt-input").val($("#"+t).getSelection());$("#val1").val(r.replace("XXX",i));$("#val2").val(u.replace("XXX",i));$("#promptModal").modal().show()}));$("#"+t).focus()});$("body").on("click",".prompt-sub-btn",function(){var h=$(this).closest("[id^=editorDiv]"),t=h.find(".bbc-code-editor")[0].id,n=$("#val1").val(),i=$("#val2").val(),f=$("#process").val(),r=$("#prompt-input").val(),u,e,o,s;if(f==="link")u=$("#prompt-url").val(),r.length>0?(n=n.replace("]",'="'+u+'"]'),$("#"+t).insertAtCaret(n+r+i)):$("#"+t).insertAtCaret(n+u+i);else if(f==="email")u=$("#prompt-url").val(),r.length>0?(n=n.replace("]",'="'+u+'"]'),$("#"+t).insertAtCaret(n+r+i)):$("#"+t).insertAtCaret(n+u+i);else if(f=="list"){e=r.split(/\n/);o="";for(s in e)o+="[*]"+e[s]+"[/*]";$("#"+t).insertAtCaret(n.replace("[*]","")+o+i.replace("[/*]",""))}else $("#"+t).insertAtCaret(n+r+i);return $("#promptModal").modal("hide"),!1});$("body").on("click",".prev-link",function(n){n.preventDefault();n.stopPropagation();n.stopImmediatePropagation();var t="",r=$("#Message").val().replace(/\\/g,"\\\\").replace(/"/g,'\\"'),i=!1,u=$("#ReplyId").val(),f=$("#TopicId").val();$("#Subject").length&&(t=$("#Subject").val());$("#show-sig").is(":checked")&&(i=!0);$(this).tooltip("hide");$.ajax({type:"POST",url:window.SnitzVars.baseUrl+"Forum/ProcessPreview",data:'{"Message":"'+r+'","ShowSig":"'+i+'","ReplyId":"'+u+'","TopicId":"'+f+'","Subject":"'+t+'"}',contentType:"application/json; charset=utf-8",error:function(n){BootstrapDialog.show({title:"Preview Error",message:n.responseText,size:BootstrapDialog.SIZE_WIDE})},success:function(n,t,i){var u=["height="+screen.availHeight*75/100,"width="+Math.min(screen.availWidth*95/100,800),"scrollbars=1","resizable=1"].join(","),r=window.open("","previewwindow",u);r.moveTo(10,10);r.document.write(n);r.document.close(i,status)},complete:function(){}})});$("body").on("click",".modal-close-btn",function(){$("#modal-container").modal("hide");$("#promptModal").modal("hide");$("#Message").focus()});$("#modal-container").on("hidden.bs.modal",function(){$(this).removeData("bs.modal");$.get(window.SnitzVars.baseUrl+"Home/RefreshToken",function(n){var t=$("<div />").html(n).find('input[type="hidden"]').val();$('#afToken input[type="hidden"]').val(t)})});$("#promptModal").on("hidden.bs.modal",function(){$(this).removeData("bs.modal")})});AddAntiForgeryToken=function(n){return n.__RequestVerificationToken=$("#__AjaxAntiForgeryForm input[name=__RequestVerificationToken]").val(),n};