function highlight(n,t){var i,r;for(t||(t=document.body),t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==3){if(i=t,r=0,r=i.nodeValue.toLowerCase().indexOf(n.toLowerCase()),r>-1){var f=i.nodeValue.substr(0,r),e=i.nodeValue.substr(r,n.length),o=document.createTextNode(i.nodeValue.substr(r+n.length)),u=document.createElement("span");found_highlight_rule==1?u.className="highlight":u.style.backgroundColor="yellow";u.appendChild(document.createTextNode(e));i.nodeValue=f;i.parentNode.insertBefore(o,i.nextSibling);i.parentNode.insertBefore(u,i.nextSibling);highlights.push(u);u.id="highlight_span"+highlights.length;t=t.nextSibling}}else t.nodeType==1&&t.nodeName.match(/textarea/i)&&!getStyle(t,"display").match(/none/i)?textarea2pre(t):t.nodeType!=1||getStyle(t,"visibility").match(/hidden/i)||t.nodeType!=1||getStyle(t,"display").match(/none/i)||highlight(n,t)}function unhighlight(){for(var t,i,n=0;n<highlights.length;n++)t=highlights[n].firstChild,i=highlights[n].parentNode,highlights[n].parentNode&&(highlights[n].parentNode.replaceChild(t,highlights[n]),n==find_pointer&&selectElementContents(t),i.normalize(),normalize(i));highlights=[];find_pointer=-1}function normalize(n){if(n){if(n.nodeType==3)while(n.nextSibling&&n.nextSibling.nodeType==3)n.nodeValue+=n.nextSibling.nodeValue,n.parentNode.removeChild(n.nextSibling);else normalize(n.firstChild);normalize(n.nextSibling)}}function findit(){var n=$("#fwtext").val(),t;if(find_text.toLowerCase()==n.toLowerCase()&&find_pointer>=0)findnext();else{if(unhighlight(),n==""){find_msg.innerHTML="";return}find_text=n;t=find_root_node!=null?document.getElementById(find_root_node):null;highlight(n,t);highlights.length>0?(find_pointer=-1,findnext()):(find_msg.innerHTML="&nbsp;<b>0 of 0<\/b>",find_pointer=-1)}}function findnext(){var n,t;find_pointer!=-1&&(n=highlights[find_pointer],found_highlight_rule==1?n.className="highlight":n.style.backgroundColor="yellow");find_pointer++;find_pointer>=highlights.length&&(find_pointer=0);t=find_pointer+1;find_msg.innerHTML=t+" of "+highlights.length;n=highlights[find_pointer];found_selected_rule==1?n.className="find_selected":n.style.backgroundColor="orange";self!==top?scrollToIframePosition(highlights[find_pointer]):scrollToPosition(highlights[find_pointer])}function findprev(){var n,t;highlights.length<1||(find_pointer!=-1&&(n=highlights[find_pointer],found_highlight_rule==1?n.className="highlight":n.style.backgroundColor="yellow"),find_pointer--,find_pointer<0&&(find_pointer=highlights.length-1),t=find_pointer+1,find_msg.innerHTML=t+" of "+highlights.length,n=highlights[find_pointer],found_selected_rule==1?n.className="find_selected":n.style.backgroundColor="orange",alert("got here"),console.log("prev"),self!==top?scrollToIframePosition(highlights[find_pointer]):scrollToPosition(highlights[find_pointer]))}function resettext(){find_text.toLowerCase()!=document.getElementById("fwtext").value.toLowerCase()&&unhighlight()}function scrollToPosition(n){var u=document.body.scrollLeft||document.documentElement.scrollLeft,f=document.body.scrollTop||document.documentElement.scrollTop,e=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+f,o=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+u;if(n){for(var t=n,i=t.offsetLeft,r=t.offsetTop,t=t.offsetParent;t!=null;)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;(i<u||i>o||r<f||r>e)&&n.scrollIntoView()}}function scrollToIframePosition(n){var u=window.frames.iframe1.document.body.scrollLeft||window.frames.iframe1.document.documentElement.scrollLeft,f=window.frames.iframe1.document.body.scrollTop||window.frames.iframe1.document.documentElement.scrollTop,e=(window.frames.iframe1.innerHeight||window.frames.iframe1.document.documentElement.clientHeight||window.frames.iframe1.document.body.clientHeight)+f,o=(window.frames.iframe1.innerWidth||window.frames.iframe1.document.documentElement.clientWidth||window.frames.iframe1.document.body.clientWidth)+u;if(n){for(var t=n,i=t.offsetLeft,r=t.offsetTop,t=t.offsetParent;t!=null;)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;(i<u||i>o||r<f||r>e)&&window.frames.iframe1.document.documentElement.scrollTo(i,r)}}function getStyle(n,t){var i=document.getElementById(n)?document.getElementById(n):n,r="";return i.currentStyle?r=i.currentStyle[t]:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(i,null).getPropertyValue(t)),r}function textarea2pre(n){var t,i,r,u,f;if(t=n.nextSibling&&n.nextSibling.id&&n.nextSibling.id.match(/pre_/i)?n.nextsibling:document.createElement("pre"),i=n.value,i=i.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),t.innerHTML=i,r="",n.currentStyle){u=n.currentStyle;for(f in u)r+=f+":"+u[f]+";";t.style.border="1px solid black"}else r=window.getComputedStyle(n,null).cssText,t.style.cssText=r;n.parentNode.insertBefore(t,n.nextSibling);n.onblur=function(){this.style.display="none";t.style.display="block"};n.onchange=function(){t.innerHTML=n.value.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")};n.style.display="none";t.id="pre_"+highlights.length;t.onclick=function(){this.style.display="none";n.style.display="block";n.focus();n.click()}}function selectElementContents(n){var t,i,r;window.getSelection&&document.createRange?(t=document.createRange(),t.selectNodeContents(n),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)):document.body.createTextRange&&(r=document.body.createTextRange(),r.moveToElementText(n),r.select())}var findwindow=$("#findwindow")[0],find_msg=$("#find_msg"),find_root_node="main-content",find_timer=0,highlights=[],find_pointer=-1,find_text="",found_highlight_rule=0,found_selected_rule=0;